<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xfinity Loyalty Program – Naming Pilot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .chart-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }
        .chart-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .insight {
            font-size: 0.875rem;
            color: #4b5563;
            text-align: center;
            margin-top: 1rem;
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">
    <div class="text-center mb-4">
        <p class="text-sm font-semibold text-gray-500 tracking-widest">PIXEL PLOTTER</p>
    </div>
    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">Xfinity Loyalty Program – Naming Pilot</h1>
            <p class="mt-2 text-lg text-gray-600">Visual Insights from Survey Data</p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">

            <!-- Visualization 1: Most Preferred Name (The Big Winner) -->
            <div class="chart-card md:col-span-2 lg:col-span-3 xl:col-span-4">
                <h2 class="text-xl font-semibold text-center text-gray-700">"Xfinity Rewards" is the Overwhelming Favorite</h2>
                <canvas id="mostPreferredChart" class="max-h-96"></canvas>
                <p class="insight">Over half of all respondents chose "Xfinity Rewards" as their most preferred name, more than doubling its closest competitor.</p>
            </div>

            <!-- Visualization 2: Least Preferred Name -->
            <div class="chart-card md:col-span-2">
                <h2 class="text-xl font-semibold text-center text-gray-700">"Member" & "Membership" Are Most Often Rejected</h2>
                 <canvas id="leastPreferredChart"></canvas>
                 <p class="insight">"Member" and "Membership" are frequently rejected for being too generic. "Rewards" is the safest option with the fewest rejections.</p>
            </div>

            <!-- Visualization 3: Net Preference Score -->
             <div class="chart-card md:col-span-2">
                <h2 class="text-xl font-semibold text-center text-gray-700">Net Preference: A Clear Picture</h2>
                 <canvas id="netPreferenceChart"></canvas>
                 <p class="insight">"Rewards" has a massive positive score (Most Preferred minus Least Preferred), while "VIP" is polarizing (net negative) and the "Member" options are strongly disliked.</p>
            </div>
            
            <!-- Visualization 4: Key Perception Metrics -->
            <div class="chart-card md:col-span-2 lg:col-span-3 xl:col-span-4">
                <h2 class="text-xl font-semibold text-center text-gray-700">Core Perception Metrics: A Holistic View</h2>
                <canvas id="perceptionMetricsChart"></canvas>
                <p class="insight !mt-4">The Radar Chart now shows percentages directly at each point for a cleaner look, highlighting that "Rewards" consistently performs well across all metrics.</p>
            </div>

            <!-- Visualization 5: Impact on Brand Consideration -->
            <div class="chart-card md:col-span-2">
                <h2 class="text-xl font-semibold text-center text-gray-700">Impact on Brand Consideration</h2>
                <canvas id="considerationChart"></canvas>
                <p class="insight">The lollipop chart clearly visualizes each name's positive impact on consideration, with "Membership" showing a slight edge.</p>
            </div>

            <!-- Visualization 6: Impact on Retention -->
            <div class="chart-card md:col-span-2">
                <h2 class="text-xl font-semibold text-center text-gray-700">Impact on Customer Retention</h2>
                <canvas id="retentionChart"></canvas>
                <p class="insight">This horizontal bar chart clearly shows the modest and very similar positive impact on retention for all names.</p>
            </div>

            <!-- Visualization 7: Customer vs. Prospect Agreement -->
            <div class="chart-card md:col-span-2 lg:col-span-4">
                <h2 class="text-xl font-semibold text-center text-gray-700">Customers & Prospects Agree: "Rewards" is #1</h2>
                <canvas id="customerProspectChart"></canvas>
                <p class="insight">Both existing customers and potential new customers strongly prefer "Xfinity Rewards," indicating its appeal across the entire marketing funnel.</p>
            </div>

            <!-- Visualization 8: Regional Winners -->
            <div class="chart-card md:col-span-2 lg:col-span-4">
                <h2 class="text-xl font-semibold text-center text-gray-700">Regional Winners: Where Each Name Won</h2>
                <canvas id="regionalWinnersChart"></canvas>
                <p class="insight">"Xfinity Rewards" won overwhelmingly in almost every region, with "Xfinity Membership" taking the top spot in New England.</p>
            </div>

            <!-- Visualization 9: Qualitative Feedback Themes -->
            <div class="chart-card md:col-span-2 lg:col-span-3 xl:col-span-4">
                <h2 class="text-xl font-semibold text-center text-gray-700 mb-6">What People Are Saying: Key Themes from Feedback</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4">
                    
                    <!-- Why "Rewards" Wins -->
                    <div class="p-4 rounded-lg bg-blue-50 border border-blue-200 text-center flex flex-col justify-between">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">Why People Like "Rewards"</h3>
                        <div class="flex-grow flex flex-wrap items-center justify-center gap-x-4 gap-y-2 p-2">
                            <span class="text-2xl font-bold text-blue-600">Clear</span>
                            <span class="text-lg text-gray-600">Straightforward</span>
                            <span class="text-xl font-semibold text-blue-500">Value</span>
                            <span class="text-md text-gray-500">Simple</span>
                        </div>
                        <p class="insight !text-sm !mt-4">Clarity and a direct promise of value are the key drivers of its preference.</p>
                    </div>

                    <!-- The "VIP" Appeal -->
                    <div class="p-4 rounded-lg bg-purple-50 border border-purple-200 text-center flex flex-col justify-between">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">The "VIP" Appeal</h3>
                        <div class="flex-grow flex flex-wrap items-center justify-center gap-x-4 gap-y-2 p-2">
                            <span class="text-2xl font-bold text-purple-600">Exclusive</span>
                            <span class="text-lg text-gray-600">Important</span>
                            <span class="text-xl font-semibold text-purple-500">Special</span>
                            <span class="text-md text-gray-500">Premium</span>
                        </div>
                        <p class="insight !text-sm !mt-4">Attracts users who desire a feeling of exclusivity and importance.</p>
                    </div>
                    
                    <!-- The "VIP" Backlash -->
                    <div class="p-4 rounded-lg bg-red-50 border border-red-200 text-center flex flex-col justify-between">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">The "VIP" Backlash</h3>
                         <div class="flex-grow flex flex-wrap items-center justify-center gap-x-4 gap-y-2 p-2">
                            <span class="text-2xl font-bold text-red-600">Pay Extra?</span>
                            <span class="text-lg text-gray-600">Not for me</span>
                            <span class="text-xl font-semibold text-red-500">Alienating</span>
                            <span class="text-md text-gray-500">Snobby</span>
                        </div>
                        <p class="insight !text-sm !mt-4">It alienates others who feel it implies extra cost or exclusivity they can't access.</p>
                    </div>

                    <!-- Why "Member" Fails -->
                    <div class="p-4 rounded-lg bg-gray-100 border border-gray-200 text-center flex flex-col justify-between">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">Why "Member" Fails</h3>
                        <div class="flex-grow flex flex-wrap items-center justify-center gap-x-4 gap-y-2 p-2">
                            <span class="text-2xl font-bold text-gray-600">Generic</span>
                            <span class="text-lg text-gray-600">Boring</span>
                            <span class="text-xl font-semibold text-gray-500">Vague</span>
                            <span class="text-md text-gray-400">Unclear</span>
                        </div>
                        <p class="insight !text-sm !mt-4">Seen as indistinct, failing to communicate a clear benefit or reason to join.</p>
                    </div>

                </div>
            </div>

        </main>

        <footer class="text-center mt-12 py-6 border-t border-gray-200">
            <p class="text-gray-600">
                Visualized by <span class="font-semibold text-gray-800">Sathish Krishnan</span> & <span class="font-semibold text-gray-800">Vallaba Gurunath</span>
            </p>
            <p class="text-xs text-gray-400 mt-1">Data Insights &amp; Dashboard Design</p>
        </footer>
    </div>

<script>
    // --- DATA ---
    // This data is pre-aggregated from the survey file to support the visualizations.
    const nameLabels = ['Rewards', 'VIP', 'Membership', 'Member'];
    const colors = {
        rewards: 'rgba(59, 130, 246, 0.8)',
        vip: 'rgba(139, 92, 246, 0.8)',
        membership: 'rgba(234, 179, 8, 0.8)',
        member: 'rgba(107, 114, 128, 0.8)',
        prospect: 'rgba(16, 185, 129, 0.8)',
        red: 'rgba(239, 68, 68, 0.8)',
    };
    
    const mostPreferredData = {
        labels: nameLabels,
        counts: [615, 288, 142, 155]
    };

    const leastPreferredData = {
        labels: nameLabels,
        counts: [134, 307, 356, 403]
    };
    
    const netPreferenceData = {
        labels: nameLabels,
        scores: [
            mostPreferredData.counts[0] - leastPreferredData.counts[0], // Rewards
            mostPreferredData.counts[1] - leastPreferredData.counts[1], // VIP
            mostPreferredData.counts[2] - leastPreferredData.counts[2], // Membership
            mostPreferredData.counts[3] - leastPreferredData.counts[3]  // Member
        ]
    };

    const perceptionData = {
        labels: nameLabels,
        appeal: [69.3, 67.3, 60.0, 54.7],
        clarity: [78.0, 76.7, 70.0, 69.0],
        clickIntent: [66.3, 58.0, 60.7, 55.0]
    };
    
    const considerationData = {
        labels: nameLabels,
        percentages: [57.7, 57.3, 62.3, 55.3]
    };

    const retentionData = {
        labels: nameLabels,
        percentages: [32.7, 32.0, 30.7, 30.7]
    };

    const customerProspectData = {
        labels: nameLabels,
        customers: [318, 140, 67, 75], // Estimated from summary
        prospects: [297, 148, 75, 80] // Estimated from summary
    };
    
    // Data from the uploaded CSV for the new widget
    const regionalData = [
        { region: "BELTWAY REGION", winner: "Xfinity Rewards", winner_pct: 51.9, runnerup_pct: 25.6 },
        { region: "BIG SOUTH REGION", winner: "Xfinity Rewards", winner_pct: 52.2, runnerup_pct: 23.5 },
        { region: "CALIFORNIA REGION", winner: "Xfinity Rewards", winner_pct: 57.3, runnerup_pct: 21.8 },
        { region: "CHICAGO REGION", winner: "Xfinity Rewards", winner_pct: 58.1, runnerup_pct: 21.5 },
        { region: "FLORIDA REGION", winner: "Xfinity Rewards", winner_pct: 48.3, runnerup_pct: 25.8 },
        { region: "FREEDOM REGION", winner: "Xfinity Rewards", winner_pct: 44.7, runnerup_pct: 31.6 },
        { region: "HEARTLAND REGION", winner: "Xfinity Rewards", winner_pct: 47.0, runnerup_pct: 32.5 },
        { region: "KEYSTONE REGION", winner: "Xfinity Rewards", winner_pct: 50.8, runnerup_pct: 20.6 },
        { region: "MIDWEST REGION", winner: "Xfinity Rewards", winner_pct: 56.2, runnerup_pct: 21.9 },
        { region: "MOUNTAIN WEST REGION", winner: "Xfinity Rewards", winner_pct: 50.5, runnerup_pct: 22.0 },
        { region: "NEW ENGLAND REGION", winner: "Xfinity Membership", winner_pct: 100.0, runnerup_pct: null },
        { region: "PACIFIC NORTHWEST REGION", winner: "Xfinity Rewards", winner_pct: 52.6, runnerup_pct: 25.4 },
        { region: "WESTERN NEW ENGLAND REGION", winner: "Xfinity Rewards", winner_pct: 45.1, runnerup_pct: 28.6 }
    ];

    // --- CHART CONFIG & RENDERING ---
    document.addEventListener('DOMContentLoaded', () => {
        Chart.register(ChartDataLabels);
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.plugins.legend.position = 'bottom';
        Chart.defaults.plugins.datalabels.anchor = 'end';
        Chart.defaults.plugins.datalabels.align = 'end';
        // FIXED: Added a check for null or undefined values to prevent the TypeError.
        Chart.defaults.plugins.datalabels.formatter = (value) => {
            if (value === null || typeof value === 'undefined') {
                return '';
            }
            return value.toLocaleString();
        };
        Chart.defaults.plugins.datalabels.color = '#374151';

        // Most Preferred Chart (Now a Doughnut Chart)
        new Chart(document.getElementById('mostPreferredChart'), {
            type: 'doughnut',
            data: {
                labels: mostPreferredData.labels,
                datasets: [{
                    label: 'Most Preferred Picks',
                    data: mostPreferredData.counts,
                    backgroundColor: [colors.rewards, colors.vip, colors.membership, colors.member]
                }]
            },
            options: {
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            padding: 20
                        }
                    },
                    datalabels: {
                        formatter: (value, ctx) => {
                            const total = ctx.chart.data.datasets[0].data.reduce((sum, current) => sum + current, 0);
                            const percentage = (value / total * 100).toFixed(1) + '%';
                            return percentage;
                        },
                        color: '#fff',
                        font: { weight: 'bold' },
                        anchor: 'center',
                        align: 'center'
                    }
                },
                cutout: '65%',
            }
        });

        // Least Preferred Chart
        new Chart(document.getElementById('leastPreferredChart'), {
            type: 'bar',
            data: {
                labels: leastPreferredData.labels,
                datasets: [{
                    label: 'Least Preferred Picks',
                    data: leastPreferredData.counts,
                    backgroundColor: [colors.red, colors.red, colors.red, colors.red]
                }]
            },
            options: {
                scales: { y: { beginAtZero: true } },
                plugins: { legend: { display: false } }
            }
        });
        
        // Net Preference Chart
        new Chart(document.getElementById('netPreferenceChart'), {
            type: 'bar',
            data: {
                labels: netPreferenceData.labels,
                datasets: [{
                    label: 'Net Preference Score (Most - Least)',
                    data: netPreferenceData.scores,
                    backgroundColor: netPreferenceData.scores.map(score => score > 0 ? colors.rewards : colors.red)
                }]
            },
            options: {
                indexAxis: 'y',
                scales: { x: { beginAtZero: false } },
                plugins: { legend: { display: false } }
            }
        });

        // Perception Metrics Chart (Now a Radar Chart with values shown on the chart and more spacing)
        new Chart(document.getElementById('perceptionMetricsChart'), {
            type: 'radar',
            data: {
                labels: ['Appeal %', 'Clarity %', 'Click Intent %'],
                datasets: [
                    {
                        label: 'Rewards',
                        data: [perceptionData.appeal[0], perceptionData.clarity[0], perceptionData.clickIntent[0]],
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: colors.rewards,
                        pointBackgroundColor: colors.rewards,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: colors.rewards
                    },
                    {
                        label: 'VIP',
                        data: [perceptionData.appeal[1], perceptionData.clarity[1], perceptionData.clickIntent[1]],
                        backgroundColor: 'rgba(139, 92, 246, 0.2)',
                        borderColor: colors.vip,
                        pointBackgroundColor: colors.vip,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: colors.vip
                    },
                    {
                        label: 'Membership',
                        data: [perceptionData.appeal[2], perceptionData.clarity[2], perceptionData.clickIntent[2]],
                        backgroundColor: 'rgba(234, 179, 8, 0.2)',
                        borderColor: colors.membership,
                        pointBackgroundColor: colors.membership,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: colors.membership
                    },
                    {
                        label: 'Member',
                        data: [perceptionData.appeal[3], perceptionData.clarity[3], perceptionData.clickIntent[3]],
                        backgroundColor: 'rgba(107, 114, 128, 0.2)',
                        borderColor: colors.member,
                        pointBackgroundColor: colors.member,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: colors.member
                    }
                ]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        ticks: { display: false },
                        pointLabels: {
                             display: true,
                             font: { size: 10, weight: 'bold' }
                        },
                        grid: { color: '#e5e7eb' }
                    }
                },
                plugins: {
                    datalabels: {
                        display: false,
                    }
                }
            }
        });

        // Consideration Chart (Now a Polar Area Chart)
        new Chart(document.getElementById('considerationChart'), {
            type: 'polarArea',
            data: {
                labels: considerationData.labels,
                datasets: [{
                    label: '% Top-2 Box Consideration',
                    data: considerationData.percentages,
                    backgroundColor: [colors.rewards, colors.vip, colors.membership, colors.member]
                }]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 70,
                        ticks: { backdropColor: 'transparent', color: '#6b7280' }
                    }
                },
                plugins: {
                    legend: { position: 'bottom' },
                    datalabels: {
                        formatter: (value) => value + '%',
                        color: '#fff',
                        font: { weight: 'bold' },
                        anchor: 'center',
                        align: 'center'
                    }
                }
            }
        });

        // Retention Chart (Now a Polar Area Chart)
        new Chart(document.getElementById('retentionChart'), {
            type: 'polarArea',
            data: {
                labels: retentionData.labels,
                datasets: [{
                    label: '% More Likely to Stay',
                    data: retentionData.percentages,
                    backgroundColor: [colors.rewards, colors.vip, colors.membership, colors.member]
                }]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 40,
                        ticks: { backdropColor: 'transparent', color: '#6b7280' }
                    }
                },
                plugins: {
                    legend: { position: 'bottom' },
                    datalabels: {
                        formatter: (value) => value + '%',
                        color: '#fff',
                        font: { weight: 'bold' },
                        anchor: 'center',
                        align: 'center'
                    }
                }
            }
        });

        // Customer vs. Prospect Chart
        new Chart(document.getElementById('customerProspectChart'), {
            type: 'bar',
            data: {
                labels: customerProspectData.labels,
                datasets: [
                    { label: 'Customers', data: customerProspectData.customers, backgroundColor: colors.rewards },
                    { label: 'Prospects', data: customerProspectData.prospects, backgroundColor: colors.prospect }
                ]
            },
            options: {
                scales: { y: { beginAtZero: true } }
            }
        });

        // New Regional Winners Chart
        new Chart(document.getElementById('regionalWinnersChart'), {
            type: 'bar',
            data: {
                labels: regionalData.map(d => d.region),
                datasets: [
                    {
                        label: 'Winning Name %',
                        data: regionalData.map(d => d.winner_pct),
                        backgroundColor: regionalData.map(d => {
                            if (d.winner.includes('Rewards')) return colors.rewards;
                            if (d.winner.includes('Membership')) return colors.membership;
                            return colors.member;
                        })
                    },
                    {
                        label: 'Runner-up %',
                        data: regionalData.map(d => d.runnerup_pct),
                        backgroundColor: 'rgba(209, 213, 219, 0.8)' // A light gray for contrast
                    }
                ]
            },
            options: {
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 100,
                        title: { display: true, text: 'Most Preferred Percentage (%)' }
                    }
                }
            }
        });

    });
</script>
</body>
</html>
